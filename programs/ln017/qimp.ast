-- imperative version of the quicksort
function qsort with a do
   if len(a) <= 1 do
      return a
   else do
      let pivot = a@0.
      let rest = a@(range(1,len(a))).
      let less = [].
      let more = [].
      for e in rest do
         if e <= pivot do
            less @append(e).
         else
            more @append(e).
         end
      end
      return qsort(less) + [pivot] + qsort(more).
   end
end

assert(qsort([3,7,1,6,9,5,2,10,8,4]) == [1,2,3,4,5,6,7,8,9,10]).

